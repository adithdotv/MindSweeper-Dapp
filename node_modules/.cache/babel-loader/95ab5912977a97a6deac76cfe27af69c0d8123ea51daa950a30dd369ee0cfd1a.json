{"ast":null,"code":"import { getAction } from '../../utils/getAction.js';\nimport { getBlockNumber } from './getBlockNumber.js';\nimport { getTransaction } from './getTransaction.js';\n/**\n * Returns the number of blocks passed (confirmations) since the transaction was processed on a block.\n *\n * - Docs: https://viem.sh/docs/actions/public/getTransactionConfirmations.html\n * - Example: https://stackblitz.com/github/wevm/viem/tree/main/examples/transactions/fetching-transactions\n * - JSON-RPC Methods: [`eth_getTransactionConfirmations`](https://ethereum.org/en/developers/docs/apis/json-rpc/#eth_getTransactionConfirmations)\n *\n * @param client - Client to use\n * @param parameters - {@link GetTransactionConfirmationsParameters}\n * @returns The number of blocks passed since the transaction was processed. If confirmations is 0, then the Transaction has not been confirmed & processed yet. {@link GetTransactionConfirmationsReturnType}\n *\n * @example\n * import { createPublicClient, http } from 'viem'\n * import { mainnet } from 'viem/chains'\n * import { getTransactionConfirmations } from 'viem/public'\n *\n * const client = createPublicClient({\n *   chain: mainnet,\n *   transport: http(),\n * })\n * const confirmations = await getTransactionConfirmations(client, {\n *   hash: '0x4ca7ee652d57678f26e887c149ab0735f41de37bcad58c9f6d3ed5824f15b74d',\n * })\n */\nexport async function getTransactionConfirmations(client, {\n  hash,\n  transactionReceipt\n}) {\n  const [blockNumber, transaction] = await Promise.all([getAction(client, getBlockNumber, 'getBlockNumber')({}), hash ? getAction(client, getTransaction, 'getBlockNumber')({\n    hash\n  }) : undefined]);\n  const transactionBlockNumber = transactionReceipt?.blockNumber || transaction?.blockNumber;\n  if (!transactionBlockNumber) return 0n;\n  return blockNumber - transactionBlockNumber + 1n;\n}","map":{"version":3,"names":["getAction","getBlockNumber","getTransaction","getTransactionConfirmations","client","hash","transactionReceipt","blockNumber","transaction","Promise","all","undefined","transactionBlockNumber"],"sources":["C:\\Users\\HP\\Desktop\\wEB3\\somnia\\node_modules\\viem\\actions\\public\\getTransactionConfirmations.ts"],"sourcesContent":["import type { Client } from '../../clients/createClient.js'\nimport type { Transport } from '../../clients/transports/createTransport.js'\nimport type { ErrorType } from '../../errors/utils.js'\nimport type { Chain } from '../../types/chain.js'\nimport type { Hash } from '../../types/misc.js'\nimport type { FormattedTransactionReceipt } from '../../utils/formatters/transactionReceipt.js'\nimport { getAction } from '../../utils/getAction.js'\n\nimport {\n  type GetBlockNumberErrorType,\n  getBlockNumber,\n} from './getBlockNumber.js'\nimport {\n  type GetTransactionErrorType,\n  getTransaction,\n} from './getTransaction.js'\n\nexport type GetTransactionConfirmationsParameters<\n  TChain extends Chain | undefined = Chain,\n> =\n  | {\n      /** The transaction hash. */\n      hash: Hash\n      transactionReceipt?: never\n    }\n  | {\n      hash?: never\n      /** The transaction receipt. */\n      transactionReceipt: FormattedTransactionReceipt<TChain>\n    }\n\nexport type GetTransactionConfirmationsReturnType = bigint\n\nexport type GetTransactionConfirmationsErrorType =\n  | GetBlockNumberErrorType\n  | GetTransactionErrorType\n  | ErrorType\n\n/**\n * Returns the number of blocks passed (confirmations) since the transaction was processed on a block.\n *\n * - Docs: https://viem.sh/docs/actions/public/getTransactionConfirmations.html\n * - Example: https://stackblitz.com/github/wevm/viem/tree/main/examples/transactions/fetching-transactions\n * - JSON-RPC Methods: [`eth_getTransactionConfirmations`](https://ethereum.org/en/developers/docs/apis/json-rpc/#eth_getTransactionConfirmations)\n *\n * @param client - Client to use\n * @param parameters - {@link GetTransactionConfirmationsParameters}\n * @returns The number of blocks passed since the transaction was processed. If confirmations is 0, then the Transaction has not been confirmed & processed yet. {@link GetTransactionConfirmationsReturnType}\n *\n * @example\n * import { createPublicClient, http } from 'viem'\n * import { mainnet } from 'viem/chains'\n * import { getTransactionConfirmations } from 'viem/public'\n *\n * const client = createPublicClient({\n *   chain: mainnet,\n *   transport: http(),\n * })\n * const confirmations = await getTransactionConfirmations(client, {\n *   hash: '0x4ca7ee652d57678f26e887c149ab0735f41de37bcad58c9f6d3ed5824f15b74d',\n * })\n */\nexport async function getTransactionConfirmations<\n  TChain extends Chain | undefined,\n>(\n  client: Client<Transport, TChain>,\n  { hash, transactionReceipt }: GetTransactionConfirmationsParameters<TChain>,\n): Promise<GetTransactionConfirmationsReturnType> {\n  const [blockNumber, transaction] = await Promise.all([\n    getAction(client, getBlockNumber, 'getBlockNumber')({}),\n    hash\n      ? getAction(client, getTransaction, 'getBlockNumber')({ hash })\n      : undefined,\n  ])\n  const transactionBlockNumber =\n    transactionReceipt?.blockNumber || transaction?.blockNumber\n  if (!transactionBlockNumber) return 0n\n  return blockNumber - transactionBlockNumber! + 1n\n}\n"],"mappings":"AAMA,SAASA,SAAS,QAAQ,0BAA0B;AAEpD,SAEEC,cAAc,QACT,qBAAqB;AAC5B,SAEEC,cAAc,QACT,qBAAqB;AAuB5B;;;;;;;;;;;;;;;;;;;;;;;;AAwBA,OAAO,eAAeC,2BAA2BA,CAG/CC,MAAiC,EACjC;EAAEC,IAAI;EAAEC;AAAkB,CAAiD;EAE3E,MAAM,CAACC,WAAW,EAAEC,WAAW,CAAC,GAAG,MAAMC,OAAO,CAACC,GAAG,CAAC,CACnDV,SAAS,CAACI,MAAM,EAAEH,cAAc,EAAE,gBAAgB,CAAC,CAAC,EAAE,CAAC,EACvDI,IAAI,GACAL,SAAS,CAACI,MAAM,EAAEF,cAAc,EAAE,gBAAgB,CAAC,CAAC;IAAEG;EAAI,CAAE,CAAC,GAC7DM,SAAS,CACd,CAAC;EACF,MAAMC,sBAAsB,GAC1BN,kBAAkB,EAAEC,WAAW,IAAIC,WAAW,EAAED,WAAW;EAC7D,IAAI,CAACK,sBAAsB,EAAE,OAAO,EAAE;EACtC,OAAOL,WAAW,GAAGK,sBAAuB,GAAG,EAAE;AACnD","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}